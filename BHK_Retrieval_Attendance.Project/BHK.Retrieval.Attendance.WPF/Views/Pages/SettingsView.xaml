<UserControl x:Class="BHK.Retrieval.Attendance.WPF.Views.Pages.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:vm="clr-namespace:BHK.Retrieval.Attendance.WPF.ViewModels">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">
            
            <!-- Header -->
            <TextBlock Text="CÀI ĐẶT HỆ THỐNG"
                       Style="{StaticResource MaterialDesignHeadline4TextBlock}"
                       Margin="0,0,0,20"/>

            <!-- Đường dẫn xuất file điểm danh -->
            <materialDesign:Card Margin="0,0,0,20" Padding="20">
                <StackPanel>
                    <TextBlock Text="Đường dẫn xuất file điểm danh"
                               Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                               Margin="0,0,0,10"/>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBox Grid.Column="0"
                                 Text="{Binding AttendanceExportFolder, UpdateSourceTrigger=PropertyChanged}"
                                 materialDesign:HintAssist.Hint="Đường dẫn folder"
                                 Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                 Margin="0,0,10,0"/>

                        <Button Grid.Column="1"
                                Content="CHỌN"
                                Command="{Binding BrowseAttendanceFolderCommand}"
                                Style="{StaticResource MaterialDesignOutlinedButton}"/>
                    </Grid>
                </StackPanel>
            </materialDesign:Card>

            <!-- Đường dẫn file Excel nhân viên -->
            <materialDesign:Card Margin="0,0,0,20" Padding="20">
                <StackPanel>
                    <TextBlock Text="Đường dẫn file Excel nhân viên"
                               Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                               Margin="0,0,0,10"/>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBox Grid.Column="0"
                                 Text="{Binding EmployeeDataFilePath, UpdateSourceTrigger=PropertyChanged}"
                                 materialDesign:HintAssist.Hint="Đường dẫn file Excel"
                                 Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                 Margin="0,0,10,0"/>

                        <Button Grid.Column="1"
                                Content="CHỌN"
                                Command="{Binding BrowseEmployeeFileCommand}"
                                Style="{StaticResource MaterialDesignOutlinedButton}"/>
                    </Grid>
                </StackPanel>
            </materialDesign:Card>

            <!-- Tên table -->
            <materialDesign:Card Margin="0,0,0,20" Padding="20">
                <StackPanel>
                    <TextBlock Text="Cấu hình Table"
                               Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                               Margin="0,0,0,10"/>

                    <TextBox Text="{Binding AttendanceTableName, UpdateSourceTrigger=PropertyChanged}"
                             materialDesign:HintAssist.Hint="Tên table điểm danh"
                             Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             Margin="0,0,0,15"/>

                    <TextBox Text="{Binding EmployeeTableName, UpdateSourceTrigger=PropertyChanged}"
                             materialDesign:HintAssist.Hint="Tên table nhân viên"
                             Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                </StackPanel>
            </materialDesign:Card>

            <!-- Test Buttons -->
            <materialDesign:Card Margin="0,0,0,20" Padding="20">
                <StackPanel>
                    <TextBlock Text="Chức năng Test"
                               Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                               Margin="0,0,0,15"/>

                    <Button Content="TEST XUẤT ĐIỂM DANH"
                            Command="{Binding TestExportAttendanceCommand}"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Margin="0,0,0,10"
                            HorizontalAlignment="Stretch"/>

                    <Button Content="TEST XUẤT DANH SÁCH NHÂN VIÊN"
                            Command="{Binding TestExportEmployeeCommand}"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            HorizontalAlignment="Stretch"/>
                </StackPanel>
            </materialDesign:Card>

            <!-- Action Buttons -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                <Button Content="RESET"
                        Command="{Binding ResetSettingsCommand}"
                        Style="{StaticResource MaterialDesignOutlinedButton}"
                        Margin="0,0,10,0"/>

                <Button Content="LƯU CÀI ĐẶT"
                        Command="{Binding SaveSettingsCommand}"
                        Style="{StaticResource MaterialDesignRaisedButton}"/>
            </StackPanel>

            <!-- Loading Indicator -->
            <ProgressBar IsIndeterminate="True"
                         Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                         Margin="0,20,0,0"/>
        </StackPanel>
    </ScrollViewer>
</UserControl>
