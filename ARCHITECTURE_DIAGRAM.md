# 📐 KIẾN TRÚC PROJECT - CLEAN ARCHITECTURE

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         PRESENTATION LAYER                              │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │         BHK.Retrieval.Attendance.WPF (38 folders)                 │  │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐  │  │
│  │  │ ViewModels │  │   Views    │  │  Services  │  │  Commands  │  │  │
│  │  │ (MVVM)     │  │ (XAML UI)  │  │ (Dialog,   │  │ (Relay,    │  │  │
│  │  │            │  │            │  │  Nav, etc) │  │  Async)    │  │  │
│  │  └────────────┘  └────────────┘  └────────────┘  └────────────┘  │  │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐  │  │
│  │  │ Converters │  │ Behaviors  │  │  Controls  │  │ Resources  │  │  │
│  │  │ (Value)    │  │ (XAML)     │  │ (Custom)   │  │ (Styles,   │  │  │
│  │  │            │  │            │  │            │  │  Themes)   │  │  │
│  │  └────────────┘  └────────────┘  └────────────┘  └────────────┘  │  │
│  └───────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                          BUSINESS LOGIC LAYER                           │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │         BHK.Retrieval.Attendance.Core (18 folders)                │  │
│  │  ┌────────────────────────────────────────────────────────────┐   │  │
│  │  │                    Domain Layer                            │   │  │
│  │  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │   │  │
│  │  │  │ Entities │  │  Value   │  │  Enums   │  │  Events  │   │   │  │
│  │  │  │          │  │ Objects  │  │          │  │          │   │   │  │
│  │  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │   │  │
│  │  └────────────────────────────────────────────────────────────┘   │  │
│  │  ┌────────────────────────────────────────────────────────────┐   │  │
│  │  │                   Use Cases Layer                          │   │  │
│  │  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │   │  │
│  │  │  │ Employee │  │Attendance│  │  Device  │  │  Report  │   │   │  │
│  │  │  │ UseCases │  │ UseCases │  │ UseCases │  │ UseCases │   │   │  │
│  │  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │   │  │
│  │  └────────────────────────────────────────────────────────────┘   │  │
│  │  ┌────────────────────────────────────────────────────────────┐   │  │
│  │  │                  Interfaces (Contracts)                    │   │  │
│  │  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │   │  │
│  │  │  │ Repositories │  │   Services   │  │   External   │     │   │  │
│  │  │  │  Interfaces  │  │  Interfaces  │  │  Interfaces  │     │   │  │
│  │  │  └──────────────┘  └──────────────┘  └──────────────┘     │   │  │
│  │  └────────────────────────────────────────────────────────────┘   │  │
│  └───────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                        INFRASTRUCTURE LAYER                             │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │     BHK.Retrieval.Attendance.Infrastructure (17 folders)          │  │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐  │  │
│  │  │  Devices   │  │ SharePoint │  │Persistence │  │FileStorage │  │  │
│  │  │ (Realand,  │  │ (PnP)      │  │ (EF Core,  │  │ (Local,    │  │  │
│  │  │  ZKTeco)   │  │            │  │ Repos)     │  │  Cloud)    │  │  │
│  │  └────────────┘  └────────────┘  └────────────┘  └────────────┘  │  │
│  │  ┌────────────┐  ┌────────────┐                                   │  │
│  │  │   Config   │  │  External  │                                   │  │
│  │  │ (DB, Log)  │  │ (Email,AD) │                                   │  │
│  │  └────────────┘  └────────────┘                                   │  │
│  └───────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                          SHARED COMPONENTS                              │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │         BHK.Retrieval.Attendance.Shared (11 folders)              │  │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐  │  │
│  │  │ Extensions │  │   Results  │  │  Options   │  │  Logging   │  │  │
│  │  └────────────┘  └────────────┘  └────────────┘  └────────────┘  │  │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐  │  │
│  │  │ Constants  │  │ Exceptions │  │ Utilities  │  │ Attributes │  │  │
│  │  └────────────┘  └────────────┘  └────────────┘  └────────────┘  │  │
│  └───────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│                           SUPPORTING LAYERS                             │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐         │
│  │     Tests       │  │   Documentation │  │     Assets      │         │
│  │  (16 folders)   │  │   (4 folders)   │  │   (7 folders)   │         │
│  │  ┌───────────┐  │  │  ┌───────────┐  │  │  ┌───────────┐  │         │
│  │  │ Unit Tests│  │  │  │ Technical │  │  │  │  Design   │  │         │
│  │  │Integration│  │  │  │   User    │  │  │  │ Database  │  │         │
│  │  │   E2E     │  │  │  │  DevDocs  │  │  │  │  Config   │  │         │
│  │  └───────────┘  │  │  └───────────┘  │  │  └───────────┘  │         │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘         │
└─────────────────────────────────────────────────────────────────────────┘
```

## 🔗 **DEPENDENCY FLOW**

```
WPF ──────────────┐
                  │
                  ├─────► Core ──────┐
                  │                  │
Infrastructure ───┤                  ├─────► Shared
                  │                  │
Tests ────────────┘                  │
                                     │
Documentation ───────────────────────┘
Assets ──────────────────────────────┘
```

## 📦 **PROJECT REFERENCES**

```
┌─────────────────────────────────────────────┐
│  BHK.Retrieval.Attendance.WPF               │
│  References:                                │
│  ├── Core                                   │
│  ├── Infrastructure                         │
│  └── Shared                                 │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│  BHK.Retrieval.Attendance.Infrastructure    │
│  References:                                │
│  ├── Core                                   │
│  └── Shared                                 │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│  BHK.Retrieval.Attendance.Core              │
│  References:                                │
│  └── Shared                                 │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│  BHK.Retrieval.Attendance.Shared            │
│  References: NONE (Pure shared library)     │
└─────────────────────────────────────────────┘
```

## 🎯 **LAYER RESPONSIBILITIES**

### **WPF Layer (Presentation)**
- User Interface (XAML)
- ViewModels (MVVM pattern)
- UI Services (Navigation, Dialogs)
- Converters, Behaviors
- Material Design UI

### **Core Layer (Business Logic)**
- Domain Entities
- Business Rules (Specifications)
- Use Cases / Application Services
- DTOs & Contracts
- Interfaces (Repositories, Services)

### **Infrastructure Layer (Data & External)**
- Database (Entity Framework)
- Device Communication (Realand, ZKTeco)
- SharePoint Integration
- File Storage
- External Services (Email, SMS, AD)

### **Shared Layer (Cross-cutting)**
- Extension Methods
- Constants
- Exceptions
- Utilities
- Logging
- Configuration Options

---

**Ngày tạo:** October 8, 2025  
**Tổng folders:** 113  
**Architecture:** Clean Architecture + MVVM
